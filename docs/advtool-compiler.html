<div class="ibm-leadspace-head ibm-alternate" style="background: url(https://developer.ibm.com/linuxonpower/wp-content/uploads/sites/105/2017/04/toolchain-e1492113317878.jpg) center / cover no-repeat;">
   <div class="ibm-leadspace-body ibm-padding-top-r2 ibm-padding-bottom-r2">
      <div class="ibm-columns ibm-alternate-background">
         <div class="ibm-col-2-1 ibm-col-medium-1-1">
            <h1 class="ibm-h1 ibm-medium">Advance Toolchain for Linux on Power</h1>
            <h4 class="ibm-h4">Taking advantage of leading edge tools and libraries</h4>
         </div>
      </div>
   </div>
</div>
<!--closes leadspace -->
<div id="ibm-content-nav">
   <div class="ibm-graphic-tabs ibm-graphic-tabs--colored">
      <ul role="tablist" class="ibm-tabs ibm-background-blue-90 ibm-border-purple-40 ibm-textcolor-white-core" aria-label="Tab navigation">
         <li role="presentation"><a role="tab" href="//developer.ibm.com/linuxonpower/advance-toolchain">Get started</a></li>
         <li role="presentation"><a role="tab" href="//developer.ibm.com/linuxonpower/advance-toolchain/advtool-installation">Installation</a></li>
         <li role="presentation"><a role="tab" href="//developer.ibm.com/linuxonpower/advance-toolchain/adv-tool-usage">Usage</a></li>
         <li role="presentation"><a role="tab" href="//developer.ibm.com/linuxonpower/advance-toolchain/advtool-faq">FAQ</a></li>
         <li role="presentation" class="ibm-active"><a aria-selected="true" role="tab" href="//developer.ibm.com/linuxonpower/advance-toolchain/advtool-compiler">Cross-compiler</a></li>
      </ul>
   </div>
</div>
<!--closes tab bar -->



<!-- Start the get support button and overlay -->
<div class="center">
   <p><a href="#" onclick="IBMCore.common.widget.overlay.show('SUPPORT'); return false;">Get support</a></p>
   <div class="ibm-common-overlay ibm-overlay-alt" data-widget="overlay" id="SUPPORT">
      <p class="ibm-h2">Get support from the experts</p>
      <!-- edit support links in this list as needed for your page -->
      <ul class="ibm-light">
         <li>Ask your question in <a href="https://developer.ibm.com/answers/smartspace/linuxonpower/index.html" target="_blank">dW Answers</a></li>

         <li>Subscribe to the <a href="https://lists.ozlabs.org/listinfo/linuxppc-users" target="_blank">linuxppc-users mailing list</a>; monitor the discussion or ask a question</li>

         <li>If you are using the Advance Toolchain as directed by an IBM product team (i.e. IBM XL Compiler or PowerVM Lx86), please report the suspected issues to the IBM Support using that product name and entitlement.</li>
         <li>If you have a contract with IBM Support, contact IBM Support Line for Linux (Select option 2 (other business products or solutions) -> Option 2 (Software) -> Option 7 (Other OS/Linux).</li>
         <li>If you have a GitHub account you can open an issue in the <a href="https://github.com/advancetoolchain/advance-toolchain/issues" target="_blank">Advance Toolchain repository</a></li>

      </ul>
   </div>
</div>
<!-- Ends the support button and overlay -->



<!-- Begin content -->
<div class="ibm-band ibm-background-white-core ibm-padding-top-1 ibm-padding-bottom-0" id="advtool-compiler-intro">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">
         <p class="ibm-h4">The Advance Toolchain provides cross compilers that run on Intel x86 and generate code for Power which help teams to start developing for Power without having immediate access to a POWER server. The cross compiler provides a way to compile programs for POWER using a x86 (i386) or x86-64 (amd64) machine, helping teams to start developing for POWER without having access to a server in the early development phase.</p>
</div>
</div>
</div>

<div class="ibm-columns ibm-background-warm-white ibm-padding-top-r1 ibm-padding-bottom-r1" data-widget="setsameheight" data-items=".ibm-blocklink">


    <div class="ibm-col-6-2 ibm-col-medium-6-4">
        <a href="#install-cross-compiler" class="ibm-blocklink ibm-highlight-bg-purple-50 ibm-padding-content">
            <span class="ibm-icon-nolink ibm-textcolor-default ibm-padding-bottom-0 ibm-anchor-down-link">Install the cross-compiler</span>
        </a>
    </div>
    <div class="ibm-col-6-2 ibm-col-medium-6-4">
    <a href="#compiler-sample-program" class="ibm-blocklink ibm-highlight-bg-purple-50 ibm-padding-content">
            <span class="ibm-icon-nolink ibm-textcolor-default ibm-padding-bottom-0 ibm-anchor-down-link">Build</span>
    </a>
    </div>

    <div class="ibm-col-6-2 ibm-col-medium-6-4">
        <a href="#compiler-FAQ" class="ibm-blocklink ibm-highlight-bg-purple-50 ibm-padding-content">
            <span class="ibm-icon-nolink ibm-textcolor-default ibm-padding-bottom-0 ibm-anchor-down-link">FAQ</span>
        </a>
    </div>
</div>
<div class="ibm-band ibm-background-white-core ibm-padding-top-1 ibm-padding-bottom-0" id="advtool-compiler-installing">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">
</div>
</div>
</div>

<!-- start of contact block band -->
<div class="ibm-background-blue-90 ibm-padding-top-1"></div>

<!-- start of contact block band -->
<div class="ibm-background-purple-60 ibm-padding-top-1">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">

<p class="ibm-h3 ibm-light ibm-alternate-background" id="install-cross-compiler">Installing the cross-compiler</p>
</div>
</div>
</div>

<!-- Begin content -->
<style>
pre {
    margin-top: 1em;
    margin-left: 4em;
}
</style>
<div class="ibm-band ibm-background-white-core ibm-padding-top-1 ibm-padding-bottom-0">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">

<div data-widget="dyntabs" class="ibm-graphic-tabs ibm-graphic-tabs--colored">
<!-- Tabs here: -->
<div class="ibm-tab-section" id="crosscompilerinstalltabs">
<ul class="ibm-tabs" role="tablist">
        <li role="presentation"class="ibm-active"><a aria-selected="true" role="tab" href="#compilerrhel">On Red Hat</a></li>
        <li role="presentation"><a role="tab" href="#compilersles">On SLES</a></li>
        <li role="presentation"><a role="tab" href="#compilerubuntu">On Ubuntu or Debian</a></li>
</ul>
</div>
<!-- Tabs content body with tab contents divs inside: -->
<div class="ibm-container-body ibm-background-white-core">
<div id="compilerrhel" class="ibm-tabs-content">


 <p class="ibm-light">Use these steps to download the public key, create a repository configuration file, and install the cross-compiler package.</p>

<ol>

	<li>The gpg public key <code>gpg-pubkey-6976a827-5164221b</code> is provided in the IBM repositories. This public key is used to verify the authenticity of both the Advance Toolchain packages and the repository contents. Download the gpg public key for your Linux distribution and import it using the following commands:
<pre>
wget ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/redhat/RHEL7/gpg-pubkey-6976a827-5164221b
rpm --import gpg-pubkey-6976a827-5164221b
</pre>
<p>Notes:</p>
<ul><li>If you are installing on Red Hat 6, you must include two gpg public keys: <code>gpg-pubkey-6976a827-5164221b</code> and <code>gpg-pubkey-3052930d-5175955a</code>.</li></ul>
<li>Create a configuration file for the Advance Toolchain repository configuration file: <code>/etc/yum.repos.d/<em>advance-toolchain.repo</em></code>. Add the following content:
<pre>
# Begin of configuration file
[advance-toolchain]
name=Advance Toolchain IBM FTP
baseurl=ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/redhat/<em>RHELX</em>
failovermethod=priority
enabled=1
gpgcheck=1
gpgkey=ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/redhat/<em>RHELX</em>/gpg-pubkey-6976a827-5164221b
# End of configuration file
</pre>
<p>Replace <em>RHELX </em>with the Red Hat release that you are using.</p>
</li>
<li>Install the cross-compiler by running yum install: <code>yum install advance-toolchain-atX.X-cross-ppc64</code></li>
</ol>
</div>
</div>

<!-- Tabs content body with tab contents divs inside: -->
<div class="ibm-container-body ibm-background-white-core">
<div id="compilersles" class="ibm-tabs-content">

 <p class="ibm-light">Use these steps to download the public key, create a repository configuration file, and install the Advance Toolchain packages.</p>

<ol>

	<li>The gpg public key <code>gpg-pubkey-6976a827-5164221b</code> is provided in the IBM repositories. This public key is used to verify the authenticity of both the Advance Toolchain packages and the repository contents. Download the gpg public key for your Linux distribution and import it using the following commands:
<pre>
wget ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/redhat/RHEL7/gpg-pubkey-6976a827-5164221b
rpm --import gpg-pubkey-6976a827-5164221b
</pre>
</li>
<li>Create a configuration file for the Advance Toolchain repository configuration file: <code>/etc/yum.repos.d/advance-toolchain.repo</code>.  Add the following content:
<pre>
# Begin of configuration file
[advance-toolchain]
name=Advance Toolchain IBM FTP
baseurl=ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/suse/SLES_12
failovermethod=priority
enabled=1
gpgcheck=1
gpgkey=ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/suse/SLES_12/gpg-pubkey-6976a827-5164221b
# End of configuration file
</pre>
</li>
<li>To install the cross compiler using YAST, follow these steps:
<ol>
<li>Run yast2 as root.</li>
<li>Select Add-on Product.</li>
<li>From Media Type, select the FTP Protocol:  <code>(x) FTP...</code></li>
<li>Under Server name, enter <code>public.dhe.ibm.com</code>.
<li>Under Directory on Server, enter  <code>/software/server/POWER/Linux/toolchain/at/suse/SLES_12</code>
<p>You will get a warning about there being no product information available at the given location. This is because the repomd-based repository does not contain the YaST product information. This is not a bug. Select [Continue].</p></li>
<li>Under the Software Management interface, search for "advance toolchain", and select <code>advance-toolchain-atX.X-cross-ppc64</code> or <code>advance-toolchain-atX.X-cross-ppc64le</code>.


</li>
</ol>
</li>
<li>To install the cross-compiler with Zypper:

<ol><li>As root, add the IBM FTP to the repository list:
<pre>
zypper addrepo ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/suse/SLES_12 "Advance Toolchain"
</pre>
<p>This will create a new repository entry called "Advance Toolchain" pointing to the IBM FTP site</p>
<li>To install the cross-compiler, run the following command: <code>zypper install advance-toolchain-atX.X-cross-ppc64</code>
</li>
</ol>
</li>
</ol>

</div>
</div>
<div class="ibm-container-body ibm-background-white-core">
<div id="compilerubuntu" class="ibm-tabs-content">
<p class="ibm-light">Use these steps to download the public key, create a repository configuration file, and install the cross-compiler package</p>

<ol>

	<li>The gpg public key <code>gpg-pubkey-6976a827-5164221b</code> is provided in the repositories. This public key is used to verify the authenticity of both the Advance Toolchain packages and the repository contents. Download the gpg public key for your Linux distribution and import it using the following commands:
<pre>
wget ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/ubuntu/dists/trusty/6976a827.gpg.key
sudo apt-key add 6976a827.gpg.key
</pre>
</li>
<li>Configure the Advance Toolchain repositories by adding the following line to <code>/etc/apt/sources.list</code>:
<p>On ppc64el or amd64:</p>
<pre>
deb ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/ubuntu trusty atX.X
</pre>

<p>Notes:</p>

<ul>
	<li>When installing on Ubuntu 16.04 (xenial) or Ubuntu 14.10 (utopic), point to its respective repository:
<pre>
deb ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/ubuntu xenial atX.X
deb ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/ubuntu utopic atX.X
</pre>
	</li>


    	<li>When installing on Debian 8 (jessie), point to its respective repository:
<pre>
deb ftp://public.dhe.ibm.com/software/server/POWER/Linux/toolchain/at/debian jessie atX.X
</pre>
	</li>
</ul>
</li>
	<li>Refresh the cache by running: <code>sudo aptitude update</code> or <code>sudo apt-get update</code>.</li>


	<li>Install the cross-compiler by running <code>sudo aptitude install advance-toolchain-atX.X-cross-ppc64</code> or <code>sudo apt-get install advance-toolchain-atX.X-cross-ppc64</code>.</li>

</ol>

<p>APT supports package upgrades for new revision releases (i.e. 7.1-0 to 7.1-1). For new major releases (i.e. 7.1-1 to 8.0-0), please proceed as in a normal installation.</p>
</div>

</div>
</div>
</div>
</div>
</div>



<!-- start of contact block band -->
<div class="ibm-background-blue-90 ibm-padding-top-1"></div>

<!-- start of contact block band -->
<div class="ibm-background-purple-60 ibm-padding-top-1">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">

<p class="ibm-h3 ibm-light ibm-alternate-background" id="compiler-sample-program">Building a sample program</p>
</div>
</div>
</div>
<div class="ibm-band ibm-background-white-core ibm-padding-top-1 ibm-padding-bottom-0">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">
         <p><a href="https://www.gnu.org/software/wget/" target="_blank">GNU wget</a> is a small program that highlights the important problems when cross compiling a certain software: it depends on libraries provided by the Advance Toolchain cross compiler and external libraries.</p>

         <p>In this example, we'll build GNU wget for POWER little-endian, using a x86 computer with the Advance Toolchain cross compiler.</p>



<p class="ibm-h3">Copy headers and libraries</p>

         <p>First, it is necessary to copy all necessary libraries and headers to a certain directory. This example uses the following libraries and headers:</p>

<ul>
    	<li>Headers: <code>${HOME}/wget/include</code></li>

    	<li>Libraries: <code>${HOME}/wget/lib</code></li>
</ul>



         <p>In this case, ${HOME} is a shell variable holding the path of my home directory.</p>

         <p>For GNU wget, we need to provide some OpenSSL libraries and Zlib. Both of them are available in the Advance Toolchain native compiler. However, the list of necessary libraries may vary according to the project. If you don't know well the project, you can use the following tools in order to identify the list of libraries they use:</p>

<pre>
ldd &lt;executable&gt;
rpm -q --requires -p &lt;package.rpm&gt;
dpkg-deb -f &lt;package.deb&gt; | grep "Depends:"
</pre>

         <p>Usually the list of libraries necessary to build a project is the same across all processor architectures. So, you may use the above commands against an executable or package compiled for another processor.</p>

         <p>This is the list of files required in order to build wget:</p>

<pre>
$ ls -1 ${HOME}/wget/include/
openssl/
zconf.h
zlib.h
$ ls -1 ${HOME}/wget/lib/
libcrypto.so
libcrypto.so.1.0.0
libssl.so
libssl.so.1.0.0
libz.so
libz.so.1
libz.so.1.2.6
</pre>

         <p>Make sure the libraries are really compiled for the target processor. If they don't match, you won't be able to use them. You may use 'readelf -h' to verify this information:</p>

<pre>
$ /opt/at7.1/bin/powerpc64le-linux-gnu-readelf -h ${HOME}/wget/lib/libz.so.1.2.6
...
  Data:                              2's complement, little endian
...
  Machine:                           PowerPC64
...
</pre>


<p class="ibm-h3">Build</p>

         <p>With the header files and libraries in place, the system is ready to start the build. So, create a separate build directory:</p>

<pre>
mkdir ${HOME}/wget/build && cd ${HOME}/wget/build
</pre>

         <p>After entering the separate build directory, it's possible to configure the build by running:</p>

<pre>
CC=/opt/at7.1/bin/powerpc64le-linux-gnu-gcc \
CFLAGS="-I${HOME}/wget/include" \
LDFLAGS="-L${HOME}/wget/lib" \
        ../wget-1.15/configure \
                --host=powerpc64le-linux \
                --with-ssl=openssl
</pre>

         <p>Where:</p>


<blockquote>
<ul>
    	<li><code>CC</code> specifies which compiler to use. In this case, Advance Toolchain 7.1 cross compiler for POWER little endian. Cross compilers usually have a prefix in their program name to clearly indicate they won't generate executable code for the current processor. In this case, the prefix is "<code>powerpc64le-linux-gnu-</code>". This rule applies to all programs, for example: g++, gdb, ld, as, etc.</li>
    	<li><code>CFLAGS="-I"</code> indicates where the compiler will find the header files.</li>
    	<li><code>LDFLAGS="-L"</code> indicates where the linker will find the libraries.</li>
    	<li><code>../wget-1.15</code> this is the directory where wget source code is available. In this case it is the same of ${HOME}/wget/wget-1.15.</li>
    	<li><code>--host=powerpc64le-linux</code> indicates this code will run on POWER little endian.</li>
    	<li><code>--with-ssl=openssl</code> forces wget to use OpenSSL.</li>
</ul></blockquote>


         <p>Finally, build wget:</p>

<code>make</code>

         <p>After running this you'll find the program available at <code>${HOME}/wget/build/src/wget</code>.</p>

         <p>You can now copy it to a POWER little endian system with the Advance Toolchain runtime package installed and run it.</p>
      </div>
   </div>
</div>
<!-- start of contact block band -->
<div class="ibm-background-blue-90 ibm-padding-top-1"></div>

<!-- start of contact block band -->
<div class="ibm-background-purple-60 ibm-padding-top-1">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">

<p class="ibm-h3 ibm-light ibm-alternate-background" id="compiler-FAQ">Frequently asked questions</p>
</div>
</div>
</div>
<div class="ibm-band ibm-background-white-core ibm-padding-top-1 ibm-padding-bottom-0" id="advtool-compiler-faq">
   <div class="ibm-columns">
      <div class="ibm-col-1-1">
<p>Learn more about the cross-compiler with these frequently asked questions.</p>
</div>
</div>
</div>

<!--closes intro band -->
<!--Start of vertical tabs -->
<div data-widget="dyntabs" class="ibm-graphic-tabs ibm-graphic-tabs--colored ibm-vertical-tabs ibm-padding-bottom-3" data-remembertab="false">
   <!-- Tabs here: -->
   <div class="ibm-columns">
      <!-- Tabs inside a 6-2: -->
      <div class="ibm-col-6-2 ibm-col-medium-5-2">
         <div class="ibm-tab-section">
            <ul class="ibm-tabs ibm-background-white-core ibm-border-purple-90" role="tablist">
               <li style="margin-top:4px"><a aria-selected="true" role="tab" href="#faq1">Are cross compiler builds slower?</a></li>
               <li style="margin-top:4px"><a role="tab" href="#faq2">If I build a program using a cross compiler will it be slower than using a native toolchain?</a></li>
               <li style="margin-top:4px"><a role="tab" href="#faq3">My project doesn't allow to pass flags to the linker or to the compiler. How can I use extra libraries?</a></li>
            </ul>
         </div>
      </div>
      <!-- Tabs content body with tab contents divs inside a 6-4: -->
      <div class="ibm-col-6-4 ibm-col-medium-5-3">
         <div id="faq1" class="ibm-tabs-content">
            <h3>Are cross compiler builds slower?</h3>
            <p>Not necessarily. It depends on the code being built and the level of optimization in use.</p>
<div class="ibm-columns">
    <div class="ibm-col-2-2 ibm-center ibm-padding-top-r1">
<p class="ibm-center"><button type="button" class="ibm-btn-pri ibm-btn-gray-50 copyFAQ1">Copy Link</button></p></div>
</div>
</div>
         <!-- Begin content for faq2 tab -->
         <div id="faq2" class="ibm-tabs-content">
            <h3>If I build a program using a cross compiler will it be slower than using a native toolchain?</h3>
            <p>No. There are some differences in the metadata of the binaries, but it will run at the same speed.</p>
<div class="ibm-columns">
    <div class="ibm-col-2-2 ibm-center ibm-padding-top-r1">
<p class="ibm-center"><button type="button" class="ibm-btn-pri ibm-btn-gray-50 copyFAQ2">Copy Link</button></p></div>
</div>
</div>
         <!-- Begin content for faq3 tab -->
         <div id="faq3" class="ibm-tabs-content">
            <h3>My project doesn't allow to pass flags to the linker or to the compiler. How can I use extra libraries?</h3>

<p>In this case, it isn't possible to pass -I to the compiler or -L to linker and the only possible solution is to save the headers and libraries in one of the Advance Toolchain directories:</p>

    <p>For POWER big endian (ppc or ppc64):</p>
<pre>
/opt/atX.X/ppc/usr/include
/opt/atX.X/ppc/usr/lib (32-bit libraries)
/opt/atX.X/ppc/usr/lib64 (64-bit libraries)
For POWER little endian (ppc64le):
/opt/atX.X/ppc64le/usr/include
/opt/atX.X/ppc64le/usr/lib64
</pre>

<p>Be careful to not override any Advance Toolchain files while copying the files.</p>

<div class="ibm-columns">
    <div class="ibm-col-2-2 ibm-center ibm-padding-top-r1">
<p class="ibm-center"><button type="button" class="ibm-btn-pri ibm-btn-gray-50 copyFAQ3">Copy Link</button></p></div>
</div>
</div>
</div>
</div>
</div>
         <!-- Begin content for description tab -->

